## TCP
工作在传输层，是一种面向连接的、可靠的、基于字节流的传输层通信协议
### TCP三次握手
![TCP建立连接示意图](https://images2018.cnblogs.com/blog/1158196/201803/1158196-20180301191116528-1173543278.png)
  1. 服务端通过socket，bind和listen准备好接受外来的连接，此时服务端状态为Listen
  2. 客户端通过调用connect来发起主动连接，导致客户端TCP发送一个SYN（同步）字节，告诉服务器客户将在（待建立的）连接中发送的数据的初始序列号，客户端状态为SYN_SENT
  3. 服务器确认（ACK）客户的SYN，并自己也发送一个SYN，它包含服务器将在同一连接中发送数据的初始序列号
  4. 客户端确认服务的ACK和SYN，向服务器发送ACK，客户端状态ESTABLISHED
  5. 服务器接收ACK,服务器状态ESABLISHED

### TCP四次挥手
![TCP断开连接示意图](https://images2018.cnblogs.com/blog/1158196/201803/1158196-20180301191028587-1027330495.png)
  1. 某端首先调用close，成为主动关闭端，向另一端发送FIN分节，表示数据发送完毕，此时主动关闭端状态FIN_WAIT_1
  2. 接收到FIN的是被动关闭端，FIN由TCP确认，先向主动关闭端发送ACK，作为一个文件结束符传递给接收端应用进程（放在已排队等候该应用进程接收到的任何其他数据之后），因为FIN的接收意味着接收端应用进程在相应连接无额外数据可接收，接收端状态CLOSE_WAIT；主动关闭端接收到ACK状态变为FIN_WAIT_2
  3. 一段时间后，接收端接收到这个文件结束符的应用进程调用close关闭套接字，向主动关闭端发送FIN，接收端状态为LAST_ACK
  4. 主动关闭端确认FIN，状态变为TIME_WAIT，并向接收端发送ACK，接收端接收到ACK关闭TCP，而主动关闭端一段时间后也关闭TCP

[参考：TCP建立与断开连接](https://www.cnblogs.com/dj0325/p/8490293.html)

### TCP与UDP的区别
  1. TCP面向连接，UDP面向数据报
  2. TCP保证有序数据传输，UDP不保证
  3. TCP是可靠的传输，UDP会出现丢包
  4. TCP提供阻塞/流量控制，UDP没有
  5. TCP适用于可靠性要求高的传输，数据量大，传输时间要求低的场景；UDP适用于时间要求高，可靠性要求低，数据量较少的场景
  
